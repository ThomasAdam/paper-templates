<html>
	<head>
		<meta charset=utf-8 />
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<style>
	#pagemock {
		border-style: solid;
		border-width: 1px;
		width: 300px;
		height: 400px;
	}
	#pagecontainer {
		display: flex;
	}
	#pageform {
		flex-grow: 1;
		padding: 20;
	}
</style>	
	</head>
	<body>
		<h1>Page Template Generator</h1>
		<p>Use the form below to customise the template required.</p>
		<div id="pagecontainer">
			<div id="pagemock">
				<canvas id="DemoCanvas" width="300" height="400"></canvas>
			</div>
			<div id="pageform">
				<input type="checkbox" id="rmargin" name="rmargin" value="rmargin">Right Margin</input>	
			</div>
		</div>
	<script>
		$('#rmargin').change(function() {
			var canvas = document.getElementById('DemoCanvas');
			var ctx = getCanvas();
			if (this.checked) {
				drawMargins(canvas, ctx, true, true);
			} else {
				drawMargins(canvas, ctx, true, false);
			}
		});

		let thin_line = 0.5;

		function getCanvas() {
			var canvas = document.getElementById('DemoCanvas');
			if (canvas.getContext) {
				return canvas.getContext("2d");
			}
			return null;
		}
		
		function drawTopLine(ctx, howNarrow) {
			// Give the first line on the page a different colour.
			ctx.beginPath();
			ctx.moveTo(0, howNarrow * 2);
			ctx.lineTo(canvas.width, howNarrow * 2);
			ctx.strokeStyle = 'green';
			ctx.stroke();
		}

		function drawLines(canvas, ctx, howNarrow) {
			ctx.beginPath();
			for (i = howNarrow * 3 + thin_line;
				i < canvas.height;
				i += howNarrow)
			{
				  ctx.moveTo(0, i);
				  ctx.lineTo(canvas.width, i);
				  ctx.strokeStyle = 'blue';
				  ctx.stroke();
			}
		}

		function drawMargins(canvas, ctx, secondMargin, rightMargin) {
			// 10% of the height/width of the image for the margins.
			let margin_width = ((canvas.width / 100) * 10) + thin_line;
			ctx.beginPath();
			ctx.moveTo(margin_width, 0);
			ctx.lineTo(margin_width,canvas.height);
			ctx.strokeStyle = 'red';
			ctx.stroke();

			// Optional second margin.
			if (secondMargin == true) {
				ctx.moveTo(margin_width - 5, 0);
				ctx.lineTo(margin_width - 5,canvas.height);
				ctx.stroke();
			}

			// Right margin.
			if (rightMargin == true) {
				ctx.beginPath();
				let right_margin = (canvas.width - margin_width) + thin_line;
				ctx.moveTo(right_margin, 0);
				ctx.lineTo(right_margin,canvas.height);
				ctx.strokeStyle = 'gray';
				ctx.stroke();
			}
		}
		
		var canvas = document.getElementById('DemoCanvas');
		var ctx = getCanvas();
		drawLines(canvas, ctx, 20);
		drawTopLine(ctx, 20);
		drawMargins(canvas, ctx, true, true);
	</script>
	</body>
</html>
